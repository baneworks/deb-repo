#!/usr/bin/env bash

# region #! globals

#! test dir for asserts & samples
TEST_DIR="${PROJ_DIR}/tests"
TEST_VERSAMPLES="${TEST_DIR}/samples/version"

# endregion

# region #! funcs

# return true if global test mode enabled
isTestEnabled() {
  [[ -n TEST_ENABLE ]] && echo "1" || echo ""
}

isSamplesEnabled() {
  [[ -n TEST_SAMPLES ]] && echo "1" || echo ""
}

# initialize tests - files, variables, etc
testInit() {
  if [[ $(isTestEnabled) ]] || [[ $(isSamplesEnabled) ]]; then
    # [[ -d "$TEST_DIR" ]] && rm -r "$TEST_DIR"
    # mkdir "$TEST_DIR"
    if [[ $(isSamplesEnabled) ]]; then
      [[ -f "$TEST_VERSAMPLES" ]] && rm -f "$TEST_VERSAMPLES"
      touch "$TEST_VERSAMPLES"
    fi
  fi
}

# define test asserts: testAsserts <func_name>
testAsserts() {
  return
}

# do fuction test
testFunc() {
  return
}

# add function to call trace
testCallTrace() {
  return
}

# add to version samples: testAddToVersionSamples <cond> <@version>
testAddToVersionSamples() {
  [[ $(isSamplesEnabled) ]] || return
  local cond="$1"
  shift
  echo "$cond" "$@" >> "$TEST_VERSAMPLES"
  return
}

# endregion